<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Exploded Layers</title>
  <style>
    html, body {
      height: 100%;
    }
    body {
      display: flex;
      flex-flow: column;
    }

    .demo {
      margin: auto;
      width: 40vw;
      height: 40vh;

      background-repeat: no-repeat;

      background-color: red;

      background-image:
        linear-gradient(100deg, skyblue 50%, transparent 0),
        radial-gradient(closest-side circle, yellow 99%, transparent 0),
        linear-gradient(transparent, purple);

      background-size:
        100% 100%,
        50% 50%,
        100% 100%;

      background-position:
        0 0,
        50% 50%,
        0 0;

    }
  </style>
  <link rel="stylesheet" href="layerstack.css">

</head>
<body>
  <div class="demo"></div>

  <script src="layerstack.js"></script>
  <script>
    var stack;
    var demo = document.querySelector('.demo');

    document.addEventListener('click', function() {
      if (stack) {
        stack.destroy();
        return;
      }

      stack = new LayerStack(document.querySelector('.demo'));
      stack.on('afterdestroy', function(){
        // Invalidate ref after DOM cleanup
        stack = undefined;
      });
    })
  </script>

</body>
</html>
